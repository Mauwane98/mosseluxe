===============================================
ROUTER.PHP ERROR LOGGING DEBUG GUIDE
===============================================

CHANGES MADE:
-------------
1. Added comprehensive error logging to router.php
2. Added try-catch blocks around all route handlers
3. Enabled display_errors and error_reporting for debugging
4. Created detailed logging for every router action

ERROR LOG LOCATION:
------------------
- Router errors: c:\xamppp\htdocs\mosseluxe\logs\router_errors.log
- PHP errors: c:\xamppp\htdocs\mosseluxe\logs\php_errors.log
- Apache errors: C:\xamppp\apache\logs\error.log (or C:\xampp\apache\logs\error.log)

WHAT WAS ADDED TO ROUTER.PHP:
-----------------------------
1. Error logging configuration at the top
2. Logging of every request URI
3. Try-catch blocks for:
   - URI parsing
   - URI processing
   - Product detail pages
   - API routes
   - Slug-based pages
   - Homepage loading
   - 404 handling

4. File existence checks before including files
5. Detailed error messages for debugging

HOW TO DEBUG THE INTERNAL SERVER ERROR:
---------------------------------------
1. Visit the page that's causing the error
2. Check the router error log:
   - Open: c:\xamppp\htdocs\mosseluxe\logs\router_errors.log
   - Look for the most recent entries
   - Find the error message and stack trace

3. Use the test scripts:
   - Visit: http://localhost/mosseluxe/test_router_logging.php
   - Visit: http://localhost/mosseluxe/check_apache_errors.php

4. Check Apache error log:
   - Open: C:\xamppp\apache\logs\error.log
   - Look for PHP fatal errors or warnings

COMMON CAUSES OF INTERNAL SERVER ERROR:
---------------------------------------
1. Missing files (index.php, product-details.php, etc.)
2. PHP syntax errors in included files
3. Database connection failures
4. Missing dependencies (composer packages)
5. Permission issues with files/directories
6. Memory limit exceeded
7. Infinite loops or recursion

TESTING DIFFERENT ROUTES:
-------------------------
1. Homepage: http://localhost/mosseluxe/
2. Shop page: http://localhost/mosseluxe/shop
3. API endpoint: http://localhost/mosseluxe/api/cart
4. Product page: http://localhost/mosseluxe/product/1/test-product
5. Non-existent page: http://localhost/mosseluxe/nonexistent

NEXT STEPS:
-----------
1. Access your site through the browser
2. Check the router_errors.log file for detailed error information
3. The log will show:
   - Which route was accessed
   - Which file was being loaded
   - Any errors that occurred
   - Stack traces for exceptions

4. Once you identify the error, you can:
   - Fix the underlying issue
   - Check if required files exist
   - Verify database connections
   - Check PHP syntax in included files

EXAMPLE LOG OUTPUT:
------------------
[2024-11-21 13:25:00] Router accessed: /mosseluxe/
[2024-11-21 13:25:00] Processed URI: /
[2024-11-21 13:25:00] Loading index.php
[2024-11-21 13:25:00] Error loading index.php: Call to undefined function get_db_connection()

This would indicate that index.php is trying to call a function that doesn't exist,
likely because bootstrap.php or db_connect.php wasn't included.

DISABLING ERROR LOGGING (PRODUCTION):
-------------------------------------
Once you've identified and fixed the issue, you can reduce logging by:
1. Setting display_errors to '0' in router.php
2. Keeping log_errors enabled for production monitoring
3. Using the error_logging.php system for centralized error handling
